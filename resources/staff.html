<html>
<head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript"> 
        google.charts.load('current', {'packages':['line']});
        google.charts.setOnLoadCallback(drawOverallChart);
        google.charts.setOnLoadCallback(drawFlightChart);
        google.charts.setOnLoadCallback(drawSexChart);

        function drawOverallChart() {

            var data = new google.visualization.DataTable();
            data.addColumn('date', 'Date');
            data.addColumn('number', 'CPI');

            {{ .overall }}

            var options = {
                chart: {
                title: 'Squadron Progression',
                subtitle: 'Over previous 12 Months'
                },
                width: 900,
                height: 500
            };

            var formatter = new google.visualization.DateFormat({pattern:"MMMM yyyy"});
            formatter.format(data, 0);

            var chart = new google.charts.Line(document.getElementById('overall-chart'));

            chart.draw(data, options);
        }

        function drawFlightChart() {

            var data = new google.visualization.DataTable();
            data.addColumn('date', 'Date');
            data.addColumn('number', 'A Flight');
            data.addColumn('number', 'B Flight');

            {{ .flight }}

            var options = {
                chart: {
                title: 'Flight Progression',
                subtitle: 'Over previous 12 Months'
                },
                width: 900,
                height: 500
            };

            var formatter = new google.visualization.DateFormat({pattern:"MMMM yyyy"});
            formatter.format(data, 0);

            var chart = new google.charts.Line(document.getElementById('flight-chart'));

            chart.draw(data, options);
        }

        function drawSexChart() {

            var data = new google.visualization.DataTable();
            data.addColumn('date', 'Date');
            data.addColumn('number', 'Male');
            data.addColumn('number', 'Female');

            {{ .sex }}

            var options = {
                chart: {
                title: 'Gender Progression',
                subtitle: 'Over previous 12 Months'
                },
                width: 900,
                height: 500
            };

            var formatter = new google.visualization.DateFormat({pattern:"MMMM yyyy"});
            formatter.format(data, 0);

            var chart = new google.charts.Line(document.getElementById('sex-chart'));

            chart.draw(data, options);
        }
    </script>
</head>
<body> 
    <div id="overall-chart" style="width: 900px; height: 500px"></div>
    <div id="flight-chart" style="width: 900px; height: 500px"></div>
    <div id="sex-chart" style="width: 900px; height: 500px"></div>
</body>
</html>